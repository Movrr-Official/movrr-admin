import { getCampaignAnalytics } from "@/lib/campaign";
import { Campaign } from "@/schemas";

import { subDays, isAfter, isBefore, parseISO } from "date-fns";

const today = new Date();
const threshold = subDays(today, 30);

export const mockCampaigns: Campaign[] = [
  {
    id: "camp-1",
    name: "Spring Sale Campaign",
    brand: "Spring Co.",
    description:
      "Promote our spring sale with targeted ads across urban bike routes.",
    status: "active",
    budget: 5000,
    spent: 1200,
    startDate: "2025-06-11",
    endDate: "2025-07-01",
    advertiserId: "fd15d91a-235a-4532-b906-622dc6579ee7",
    campaignAnalytics: getCampaignAnalytics(1),
    impressionGoal: 25000,
    impressions: 15000,
    clicks: 300,
    ctr: 2.0,
    roi: 1.5,
    progress: 60,
    campaignType: "branding",
    targetZones: ["Amsterdam", "Utrecht"],
    targetAudience: "Young Professionals",
    vehicleTypeRequired: "bike",
    ridersAssigned: ["rider-1", "rider-3"],
    daysActive: ["Mon", "Wed", "Fri"],
    hoursActive: [{ start: "09:00", end: "17:00" }],
    deliveryMode: "manual",
    creativeAssets: [
      "https://cdn.movrr.com/assets/spring-banner-1.png",
      "https://cdn.movrr.com/assets/spring-frame-side.png",
    ],
    complianceStatus: "approved",
    _count: { impressions: 15000, clicks: 300, conversions: 50 },
    createdAt: "2023-02-25T10:00:00Z",
    updatedAt: "2025-03-15T11:45:00Z",
    routes: [
      { id: "route-1", name: "City Loop", status: "active" },
      { id: "route-2", name: "Canal Zone", status: "pending" },
    ],
    vehicle: "Cargo-Bike",
    zones: ["Rotterdam", "The Hague"],
    assets: [],
    engagementRate: 5.1,
    clickRate: 3.2,
    conversionRate: 1.4,
    avgDuration: 22,
    topCity: "Rotterdam",
  },
  {
    id: "camp-2",
    name: "Summer Festival Campaign",
    brand: "Summer Fest Inc.",
    description: "Advertise our summer events across high-traffic bike paths.",
    status: "paused",
    budget: 8000,
    spent: 4000,
    startDate: "2023-06-01",
    endDate: "2023-08-31",
    advertiserId: "advertiser2",
    campaignAnalytics: getCampaignAnalytics(2),
    impressionGoal: 40000,
    impressions: 25000,
    clicks: 500,
    ctr: 2.5,
    roi: 2.0,
    progress: 62.5,
    campaignType: "conversion",
    targetZones: ["Rotterdam", "The Hague"],
    targetAudience: "Event Goers",
    vehicleTypeRequired: "e-bike",
    ridersAssigned: ["rider-2", "rider-5"],
    daysActive: ["Thu", "Fri", "Sat"],
    hoursActive: [{ start: "12:00", end: "20:00" }],
    deliveryMode: "manual",
    creativeAssets: ["https://cdn.movrr.com/assets/summer-fest.png"],
    complianceStatus: "under_review",
    _count: { impressions: 25000, clicks: 500, conversions: 100 },
    createdAt: "2023-05-15T14:30:00Z",
    updatedAt: "2023-07-01T09:15:00Z",
    routes: [{ id: "route-3", name: "Festival Loop", status: "paused" }],
    pauseReason: "Awaiting compliance confirmation",
    vehicle: "E-Bike",
    zones: ["Rotterdam", "The Hague"],
    assets: [],
    engagementRate: 4.8,
    clickRate: 2.7,
    conversionRate: 1.1,
    avgDuration: 18,
    topCity: "Rotterdam",
  },
  {
    id: "camp-3",
    name: "Back to School Campaign",
    brand: "Back2School Ltd.",
    description: "Target students and parents with back-to-school promotions.",
    status: "draft",
    budget: 3000,
    spent: 0,
    startDate: "2023-08-01",
    endDate: "2023-09-30",
    advertiserId: "advertiser3",
    campaignAnalytics: getCampaignAnalytics(0),
    impressionGoal: 15000,
    impressions: 0,
    clicks: 0,
    ctr: 0,
    roi: 0,
    progress: 0,
    campaignType: "branding",
    targetZones: ["Amsterdam-Noord", "Delft"],
    targetAudience: "Parents & Students",
    vehicleTypeRequired: "cargo-bike",
    ridersAssigned: [],
    daysActive: [],
    hoursActive: [],
    deliveryMode: "automated",
    creativeAssets: [],
    complianceStatus: "pending",
    _count: { impressions: 0, clicks: 0, conversions: 0 },
    createdAt: "2023-07-10T08:00:00Z",
    updatedAt: "2023-07-12T10:00:00Z",
    routes: [],
    vehicle: "Cargo-Bike",
    zones: ["Amsterdam-Noord", "Delft"],
    assets: [],
    engagementRate: 0,
    clickRate: 0,
    conversionRate: 0,
    avgDuration: 0,
    topCity: "Amsterdam-Noord",
  },
  {
    id: "camp-4",
    brand: "Holiday Deals Co.",
    name: "Holiday Specials Campaign",
    description: "Promote winter holiday offers throughout shopping districts.",
    status: "completed",
    budget: 10000,
    spent: 9500,
    startDate: "2023-11-01",
    endDate: "2023-12-31",
    advertiserId: "advertiser4",
    campaignAnalytics: getCampaignAnalytics(4),
    impressionGoal: 50000,
    impressions: 50000,
    clicks: 1200,
    ctr: 2.4,
    roi: 3.2,
    progress: 100,
    campaignType: "conversion",
    targetZones: ["Eindhoven", "Haarlem"],
    targetAudience: "Shoppers",
    vehicleTypeRequired: "bike",
    ridersAssigned: ["rider-6", "rider-7"],
    daysActive: ["Mon", "Tue", "Thu", "Sat"],
    hoursActive: [{ start: "10:00", end: "18:00" }],
    deliveryMode: "manual",
    creativeAssets: ["https://cdn.movrr.com/assets/holiday-specials.png"],
    complianceStatus: "approved",
    _count: { impressions: 50000, clicks: 1200, conversions: 300 },
    createdAt: "2023-10-15T13:20:00Z",
    updatedAt: "2023-12-31T16:45:00Z",
    routes: [{ id: "route-4", name: "Mall Trail", status: "completed" }],
    vehicle: "Bike",
    zones: ["Eindhoven", "Haarlem"],
    assets: [],
    engagementRate: 5.0,
    clickRate: 2.4,
    conversionRate: 0.6,
    avgDuration: 20,
    topCity: "Eindhoven",
  },
  {
    id: "camp-5",
    name: "Urban Eats",
    brand: "Urban Eats",
    description:
      "Promote local restaurants with targeted bike ads in urban areas.",
    status: "active",
    budget: 6000,
    spent: 2000,
    startDate: "2025-06-01",
    endDate: "2025-06-30",
    advertiserId: "fd15d91a-235a-4532-b906-622dc6579ee7",
    campaignAnalytics: getCampaignAnalytics(5),
    impressionGoal: 30000,
    impressions: 20000,
    clicks: 400,
    ctr: 2.0,
    roi: 1.8,
    progress: 66.7,
    campaignType: "branding",
    targetZones: ["Amsterdam", "The Hague", "Utrecht"],
    targetAudience: "Commuters",
    vehicleTypeRequired: "bike",
    ridersAssigned: ["rider-8"],
    daysActive: ["Mon", "Wed", "Fri"],
    hoursActive: [{ start: "08:00", end: "16:00" }],
    deliveryMode: "manual",
    creativeAssets: ["https://cdn.movrr.com/assets/new-year-banner.png"],
    complianceStatus: "approved",
    _count: { impressions: 20000, clicks: 400, conversions: 80 },
    createdAt: "2023-12-20T10:00:00Z",
    updatedAt: "2025-01-15T11:45:00Z",
    routes: [{ id: "route-5", name: "Urban Eats Route", status: "active" }],
    vehicle: "Bike",
    zones: ["Amsterdam", "The Hague", "Utrecht"],
    assets: [],
    engagementRate: 4.5,
    clickRate: 2.1,
    conversionRate: 0.8,
    avgDuration: 19,
    topCity: "Amsterdam",
  },
];

export const recentCampaignIds = mockCampaigns
  .filter((c) => {
    const start = parseISO(c.startDate);
    const end = parseISO(c.endDate);
    return (
      isAfter(start, threshold) || // recently started
      (isBefore(start, today) && isAfter(end, today)) // active now
    );
  })
  .map((c) => c.id);
